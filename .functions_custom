#!/bin/bash

docker-images-clean() {
  docker rmi $(docker images -q --filter "dangling=true")
}

docker-volumes-clean() {
	docker volume rm $(docker volume ls -q)
}

gen-keys() {
  openssl genrsa -out key.pem
  openssl req -new -config gen.conf -key key.pem -out csr.pem
  openssl x509 -req -days 9999 -in csr.pem -signkey key.pem -out cert.pem
  rm csr.pem
}

check-proxy-config() {
  docker run -it --rm --name haproxy-syntax-check tectac/proxy haproxy -c -f /usr/local/etc/haproxy/haproxy.cfg
}

docker-containers-stop() {
  docker stop $(docker ps -a -q)
}

docker-containers-rm() {
  docker-containers-stop
  docker rm $(docker ps -a -q)
}

cd-main() {
  cd ~/Desktop/git/MaintenanceReportWebApp
}

cd-notes() {
	cd ~/Desktop/git/notes
}

cd-tracker() {
	cd ~/Desktop/git/go-ali-expense-tracker
}

npm-clean-and-build() {
  rm -rf ./node_modules
  npm cache clean
  npm install
  npm run build
}

ssh-gen-cert() {
	if [ -z "${1}" ]; then
		echo "ERROR: no key name specifed."
		return 1
	fi

	if [ -z "${2}" ]; then
		echo "ERROR: no server specified (format: user@server)."
		return 1
	fi

	ssh-keygen -t rsa -b 2048 -f "$1" -v
	ssh-copy-id -i "$1".pub "$2"
	mv "$1" "$1".pem
	chmod 400 "$1".pem
	ssh -i "$1".pem "$2"
}
